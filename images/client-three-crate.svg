<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-future" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#95A5A6" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333" text-anchor="middle">Client Architecture: Three Crates</text>

  <!-- cvlan-api (top) -->
  <rect x="325" y="70" width="150" height="60" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="400" y="95" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">cvlan-api</text>
  <text x="400" y="115" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Control Plane Server</text>

  <!-- cvlan-ctrl -->
  <rect x="50" y="220" width="200" height="140" fill="#F0AD4E" stroke="#333" stroke-width="2" rx="5"/>
  <text x="150" y="245" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">cvlan-ctrl</text>
  <text x="150" y="265" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Control Plane Daemon</text>
  <text x="150" y="290" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Discovery</text>
  <text x="150" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Registration</text>
  <text x="150" y="330" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Polling</text>
  <text x="150" y="350" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• SQLite state</text>

  <!-- cvland -->
  <rect x="300" y="220" width="200" height="140" fill="#5CB85C" stroke="#333" stroke-width="2" rx="5"/>
  <text x="400" y="245" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">cvland</text>
  <text x="400" y="265" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Data Plane Daemon</text>
  <text x="400" y="290" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• WireGuard tunnels</text>
  <text x="400" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• boringtun</text>
  <text x="400" y="330" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• (stub/future)</text>

  <!-- cvlancli -->
  <rect x="550" y="220" width="200" height="140" fill="#95A5A6" stroke="#333" stroke-width="2" rx="5"/>
  <text x="650" y="245" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">cvlancli</text>
  <text x="650" y="265" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Debug CLI</text>
  <text x="650" y="290" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Introspection</text>
  <text x="650" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Status queries</text>
  <text x="650" y="330" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">• Debug commands</text>

  <!-- WireGuard Tunnels (bottom, future) -->
  <rect x="325" y="480" width="150" height="60" fill="none" stroke="#95A5A6" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="400" y="505" font-family="Arial, sans-serif" font-size="14" fill="#95A5A6" text-anchor="middle">WireGuard Tunnels</text>
  <text x="400" y="525" font-family="Arial, sans-serif" font-size="11" fill="#95A5A6" text-anchor="middle">(future)</text>

  <!-- Connection: cvlan-ctrl to cvlan-api -->
  <line x1="150" y1="220" x2="380" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="240" y="165" font-family="Arial, sans-serif" font-size="11" fill="#333">HTTPS/mTLS</text>

  <!-- Connection: cvlan-ctrl to cvland (Unix Socket) -->
  <line x1="250" y1="290" x2="300" y2="290" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="275" y="280" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Unix Socket</text>

  <!-- Connection: cvland to cvlancli (Unix Socket) -->
  <line x1="500" y1="290" x2="550" y2="290" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="525" y="280" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Unix Socket</text>

  <!-- Connection: cvland to WireGuard (future) -->
  <line x1="400" y1="360" x2="400" y2="480" stroke="#95A5A6" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-future)"/>

  <!-- Legend -->
  <text x="50" y="570" font-family="Arial, sans-serif" font-size="11" fill="#333" font-style="italic">IPC via Unix sockets with connect-time attestation</text>
</svg>