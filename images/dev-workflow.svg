<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 480" font-family="Arial, Helvetica, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#555"/></marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#4A90D9"/></marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#5CB85C"/></marker>
  </defs>

  <!-- Title -->
  <text x="430" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Development Workflow</text>
  <text x="430" y="50" text-anchor="middle" font-size="11" fill="#888">All builds and tests happen inside Docker containers — never on the host</text>

  <!-- Host Machine -->
  <rect x="20" y="70" width="820" height="130" rx="10" fill="#FFF8E1" stroke="#F0AD4E" stroke-width="2"/>
  <text x="40" y="95" font-size="13" font-weight="bold" fill="#E09C3E">HOST MACHINE (macOS / Linux)</text>

  <!-- Edit code -->
  <rect x="40" y="110" width="130" height="70" rx="8" fill="#F0AD4E" stroke="#E09C3E" stroke-width="1.5"/>
  <text x="105" y="140" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Edit Code</text>
  <text x="105" y="158" text-anchor="middle" font-size="10" fill="white">IDE / Editor</text>

  <!-- Wrapper script -->
  <rect x="210" y="110" width="150" height="70" rx="8" fill="#F0AD4E" stroke="#E09C3E" stroke-width="1.5"/>
  <text x="285" y="135" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Wrapper Script</text>
  <text x="285" y="153" text-anchor="middle" font-size="10" fill="white">./scripts/test</text>
  <text x="285" y="168" text-anchor="middle" font-size="10" fill="white">./scripts/deploy</text>

  <!-- Git -->
  <rect x="680" y="110" width="140" height="70" rx="8" fill="#F0AD4E" stroke="#E09C3E" stroke-width="1.5"/>
  <text x="750" y="140" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Git Commit</text>
  <text x="750" y="158" text-anchor="middle" font-size="10" fill="white">scope: what changed</text>

  <!-- Arrow: Edit → Wrapper -->
  <line x1="170" y1="145" x2="205" y2="145" stroke="#E09C3E" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Docker Containers -->
  <rect x="20" y="230" width="820" height="120" rx="10" fill="#EBF2FA" stroke="#4A90D9" stroke-width="2"/>
  <text x="40" y="255" font-size="13" font-weight="bold" fill="#4A90D9">DOCKER SINGLETON CONTAINERS (persistent, cached)</text>

  <!-- cvlan-build -->
  <rect x="40" y="270" width="150" height="60" rx="6" fill="#4A90D9" stroke="#3A7BC8" stroke-width="1.5"/>
  <text x="115" y="293" text-anchor="middle" font-size="11" font-weight="bold" fill="white">cvlan-build</text>
  <text x="115" y="310" text-anchor="middle" font-size="9" fill="#D4E6F9">cargo build/test/clippy</text>

  <!-- vrouter-build -->
  <rect x="210" y="270" width="150" height="60" rx="6" fill="#4A90D9" stroke="#3A7BC8" stroke-width="1.5"/>
  <text x="285" y="293" text-anchor="middle" font-size="11" font-weight="bold" fill="white">vrouter-build</text>
  <text x="285" y="310" text-anchor="middle" font-size="9" fill="#D4E6F9">cargo + VPP headers</text>

  <!-- cvlan-ui-build -->
  <rect x="380" y="270" width="150" height="60" rx="6" fill="#5BC0DE" stroke="#46B0CE" stroke-width="1.5"/>
  <text x="455" y="293" text-anchor="middle" font-size="11" font-weight="bold" fill="white">cvlan-ui-build</text>
  <text x="455" y="310" text-anchor="middle" font-size="9" fill="#D4F0F7">npm/vite/eslint</text>

  <!-- client-build -->
  <rect x="550" y="270" width="150" height="60" rx="6" fill="#4A90D9" stroke="#3A7BC8" stroke-width="1.5"/>
  <text x="625" y="293" text-anchor="middle" font-size="11" font-weight="bold" fill="white">client-build</text>
  <text x="625" y="310" text-anchor="middle" font-size="9" fill="#D4E6F9">cargo + clang + lld</text>

  <!-- Arrows: Host → Docker -->
  <line x1="285" y1="180" x2="285" y2="225" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="310" y="208" font-size="10" fill="#4A90D9">docker exec</text>

  <!-- Results flow -->
  <rect x="20" y="380" width="820" height="85" rx="10" fill="#F0FAF0" stroke="#5CB85C" stroke-width="2"/>
  <text x="40" y="405" font-size="13" font-weight="bold" fill="#5CB85C">OUTPUT</text>

  <!-- Test results -->
  <rect x="40" y="415" width="140" height="35" rx="5" fill="#5CB85C" stroke="#4CAE4C" stroke-width="1"/>
  <text x="110" y="437" text-anchor="middle" font-size="11" fill="white">Test Results</text>

  <!-- Coverage -->
  <rect x="200" y="415" width="140" height="35" rx="5" fill="#5CB85C" stroke="#4CAE4C" stroke-width="1"/>
  <text x="270" y="437" text-anchor="middle" font-size="11" fill="white">Coverage Report</text>

  <!-- OCI Image -->
  <rect x="360" y="415" width="140" height="35" rx="5" fill="#5CB85C" stroke="#4CAE4C" stroke-width="1"/>
  <text x="430" y="437" text-anchor="middle" font-size="11" fill="white">OCI Image</text>

  <!-- Binary -->
  <rect x="520" y="415" width="140" height="35" rx="5" fill="#5CB85C" stroke="#4CAE4C" stroke-width="1"/>
  <text x="590" y="437" text-anchor="middle" font-size="11" fill="white">Binary / .deb</text>

  <!-- Lint -->
  <rect x="680" y="415" width="140" height="35" rx="5" fill="#5CB85C" stroke="#4CAE4C" stroke-width="1"/>
  <text x="750" y="437" text-anchor="middle" font-size="11" fill="white">Lint Clean</text>

  <!-- Arrow: Docker → Output -->
  <line x1="430" y1="350" x2="430" y2="375" stroke="#5CB85C" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- Arrow: Output → Git (back up) -->
  <path d="M 750 415 L 750 380 L 780 380 L 780 185" fill="none" stroke="#E09C3E" stroke-width="1.5" marker-end="url(#arrow)" stroke-dasharray="5,3"/>
  <text x="795" y="290" font-size="9" fill="#888" transform="rotate(90,795,290)">pass? commit</text>

  <!-- Legend -->
  <rect x="730" y="270" width="12" height="12" rx="2" fill="#F0AD4E"/>
  <text x="748" y="281" font-size="9" fill="#555">Host-side</text>
  <rect x="730" y="290" width="12" height="12" rx="2" fill="#4A90D9"/>
  <text x="748" y="301" font-size="9" fill="#555">Docker</text>
  <rect x="730" y="310" width="12" height="12" rx="2" fill="#5CB85C"/>
  <text x="748" y="321" font-size="9" fill="#555">Output</text>
</svg>
