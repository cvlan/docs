<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333" text-anchor="middle">Multi-Tenant Data Model</text>

  <!-- Tenant (root) -->
  <rect x="350" y="70" width="200" height="110" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="450" y="95" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">Tenant</text>
  <line x1="360" y1="105" x2="540" y2="105" stroke="white" stroke-width="1"/>
  <text x="365" y="122" font-family="Arial, sans-serif" font-size="11" fill="white">• name</text>
  <text x="365" y="138" font-family="Arial, sans-serif" font-size="11" fill="white">• identifier</text>
  <text x="365" y="154" font-family="Arial, sans-serif" font-size="11" fill="white">• public_key</text>
  <text x="365" y="170" font-family="Arial, sans-serif" font-size="11" fill="white">• no_sharing (bool)</text>

  <!-- CVLAN -->
  <rect x="80" y="260" width="140" height="90" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="150" y="285" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">CVLAN</text>
  <line x1="90" y1="295" x2="210" y2="295" stroke="white" stroke-width="1"/>
  <text x="95" y="312" font-family="Arial, sans-serif" font-size="11" fill="white">• name</text>
  <text x="95" y="328" font-family="Arial, sans-serif" font-size="11" fill="white">• ip_pool_id</text>
  <text x="95" y="344" font-family="Arial, sans-serif" font-size="11" fill="white">• routes</text>

  <!-- Users -->
  <rect x="260" y="260" width="140" height="90" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="330" y="285" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Users</text>
  <line x1="270" y1="295" x2="390" y2="295" stroke="white" stroke-width="1"/>
  <text x="275" y="312" font-family="Arial, sans-serif" font-size="11" fill="white">• email</text>
  <text x="275" y="328" font-family="Arial, sans-serif" font-size="11" fill="white">• role</text>
  <text x="275" y="344" font-family="Arial, sans-serif" font-size="11" fill="white">• password_hash</text>

  <!-- Groups -->
  <rect x="440" y="260" width="140" height="90" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="510" y="285" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Groups</text>
  <line x1="450" y1="295" x2="570" y2="295" stroke="white" stroke-width="1"/>
  <text x="455" y="312" font-family="Arial, sans-serif" font-size="11" fill="white">• name</text>
  <text x="455" y="328" font-family="Arial, sans-serif" font-size="11" fill="white">• member_nodes</text>
  <text x="455" y="344" font-family="Arial, sans-serif" font-size="11" fill="white">• policies</text>

  <!-- Policies -->
  <rect x="620" y="260" width="140" height="90" fill="#4A90D9" stroke="#333" stroke-width="2" rx="5"/>
  <text x="690" y="285" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Policies</text>
  <line x1="630" y1="295" x2="750" y2="295" stroke="white" stroke-width="1"/>
  <text x="635" y="312" font-family="Arial, sans-serif" font-size="11" fill="white">• ACL rules</text>
  <text x="635" y="328" font-family="Arial, sans-serif" font-size="11" fill="white">• src/dst groups</text>
  <text x="635" y="344" font-family="Arial, sans-serif" font-size="11" fill="white">• action</text>

  <!-- VRouters -->
  <rect x="80" y="450" width="140" height="90" fill="#5CB85C" stroke="#333" stroke-width="2" rx="5"/>
  <text x="150" y="475" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">VRouters</text>
  <line x1="90" y1="485" x2="210" y2="485" stroke="white" stroke-width="1"/>
  <text x="95" y="502" font-family="Arial, sans-serif" font-size="11" fill="white">• name</text>
  <text x="95" y="518" font-family="Arial, sans-serif" font-size="11" fill="white">• public_key</text>
  <text x="95" y="534" font-family="Arial, sans-serif" font-size="11" fill="white">• VRFs</text>

  <!-- Nodes (under CVLAN) -->
  <rect x="60" y="420" width="120" height="80" fill="#F0AD4E" stroke="#333" stroke-width="2" rx="5"/>
  <text x="120" y="442" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Nodes</text>
  <line x1="68" y1="450" x2="172" y2="450" stroke="white" stroke-width="1"/>
  <text x="73" y="465" font-family="Arial, sans-serif" font-size="10" fill="white">• wireguard_key</text>
  <text x="73" y="480" font-family="Arial, sans-serif" font-size="10" fill="white">• assigned_ip</text>
  <text x="73" y="495" font-family="Arial, sans-serif" font-size="10" fill="white">• mac_addr</text>

  <!-- IP Pool (under CVLAN) -->
  <rect x="200" y="420" width="120" height="80" fill="#95A5A6" stroke="#333" stroke-width="2" rx="5"/>
  <text x="260" y="442" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">IP Pool</text>
  <line x1="208" y1="450" x2="312" y2="450" stroke="white" stroke-width="1"/>
  <text x="213" y="465" font-family="Arial, sans-serif" font-size="10" fill="white">• cidr</text>
  <text x="213" y="480" font-family="Arial, sans-serif" font-size="10" fill="white">• reserved_ips</text>
  <text x="213" y="495" font-family="Arial, sans-serif" font-size="10" fill="white">• next_counter</text>

  <!-- API Keys (under Users) -->
  <rect x="270" y="420" width="120" height="80" fill="#95A5A6" stroke="#333" stroke-width="2" rx="5"/>
  <text x="330" y="442" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">API Keys</text>
  <line x1="278" y1="450" x2="382" y2="450" stroke="white" stroke-width="1"/>
  <text x="283" y="465" font-family="Arial, sans-serif" font-size="10" fill="white">• name</text>
  <text x="283" y="480" font-family="Arial, sans-serif" font-size="10" fill="white">• key_hash</text>
  <text x="283" y="495" font-family="Arial, sans-serif" font-size="10" fill="white">• permissions</text>

  <!-- Relationship lines from Tenant -->
  <line x1="390" y1="180" x2="150" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="250" y="210" font-family="Arial, sans-serif" font-size="11" fill="#333">1 --- *</text>

  <line x1="430" y1="180" x2="330" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="370" y="210" font-family="Arial, sans-serif" font-size="11" fill="#333">1 --- *</text>

  <line x1="470" y1="180" x2="510" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="500" y="210" font-family="Arial, sans-serif" font-size="11" fill="#333">1 --- *</text>

  <line x1="510" y1="180" x2="690" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="620" y="210" font-family="Arial, sans-serif" font-size="11" fill="#333">1 --- *</text>

  <line x1="400" y1="180" x2="150" y2="450" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="260" y="310" font-family="Arial, sans-serif" font-size="11" fill="#333">1 --- *</text>

  <!-- Relationship lines from CVLAN -->
  <line x1="140" y1="350" x2="120" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="90" y="385" font-family="Arial, sans-serif" font-size="10" fill="#333">1 --- *</text>

  <line x1="160" y1="350" x2="260" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="220" y="385" font-family="Arial, sans-serif" font-size="10" fill="#333">1 --- 1</text>

  <!-- Relationship line from Users to API Keys -->
  <line x1="330" y1="350" x2="330" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="345" y="385" font-family="Arial, sans-serif" font-size="10" fill="#333">1 --- *</text>

  <!-- Note box for VRouters -->
  <rect x="250" y="480" width="280" height="40" fill="#E8F9F0" stroke="#5CB85C" stroke-width="2" rx="5"/>
  <text x="390" y="500" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">VRouters can be:</text>
  <text x="390" y="515" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Global (shared) or Per-Tenant (isolated)</text>

  <!-- Legend -->
  <rect x="50" y="620" width="800" height="60" fill="#F9F9F9" stroke="#333" stroke-width="1" rx="5"/>
  <text x="450" y="642" font-family="Arial, sans-serif" font-size="12" fill="#333" text-anchor="middle" font-weight="bold">Key Concepts</text>
  <text x="450" y="660" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle">• Tenant isolation enforced at database level • no_sharing prevents cross-tenant VRouter use</text>
  <text x="450" y="675" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle">• All resources (nodes, CVLANs, policies) are scoped to a single tenant</text>
</svg>